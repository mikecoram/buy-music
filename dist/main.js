(()=>{"use strict";const t=t=>new Promise(((e,o)=>{try{t.getAsString((t=>e(t.split("\n"))))}catch(t){o(t)}}));window.addEventListener("dragover",(t=>{t.preventDefault()})),window.addEventListener("drop",(e=>{e.preventDefault(),(async e=>{const o=(await(async e=>{for(const o of e.dataTransfer.items)if("text/plain"===o.type)return await t(o)})(e)).map((t=>{const[e,o]=t.split("https://open.spotify.com/")[1].split("/");return{id:o,type:e}}));console.log(o)})(e)})),document.addEventListener("DOMContentLoaded",(t=>{const e=window.location.toString().split("#")[1];if(void 0!==e)return(t=>{const e=new URLSearchParams(t),o={};for(const t of["access_token","error","expires_in","state","token_type"])o[t]=e.get(t),e.delete(t);if(null!==o.error)throw console.log(error),console.log(JSON.stringify(error)),localStorage.removeItem("spotifyAuth"),error;o.expiry_time=new Date((new Date).getTime()+1e3*o.expires_in),localStorage.setItem("spotifyAuth",JSON.stringify(o))})(e),void window.location.replace(`${window.location.pathname}`);const o=`https://accounts.spotify.com/authorize?${new URLSearchParams({client_id:"d48e33355f30490aa2a952bbf70055ad",redirect_uri:"https://mikecoram.github.io/buy-music",response_type:"token",state:Math.random().toString()}).toString()}`;document.getElementById("login-with-spotify").setAttribute("href",o)}))})();